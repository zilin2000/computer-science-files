# 软件功能更新内容

> 开发人员： Zhibo Jia & Zilin Xu
> 日期： 2023.06.15
> 功能： Flightdeck 3D模型展示

## 目前项目效果
- 鼠标左击（触控笔单点）可以旋转模型

- 鼠标右击（触控笔长按）拖动可以放大缩小

- 鼠标滚轮键（触控笔点击Move按钮后）可以移动模型 

- select按钮可以切换是否选择模型

- switch按钮可以切换右侧显示

- submit按钮可以提交问题并从模型问答系统中获取答案

- show pdf按钮可以显示对应的pdf文件

- reset按钮可以重置模型的位置和颜色，以及文本框的内容

- update按钮将回答更新到右侧文本显示区域

### 7.31
- 更改了接收答案的长度限制与尝试次数
- 已知bug：当询问某些问题时，会出现无法获取回答的情况，程序会直接崩溃 ，没有报错信息
- 已知bug：当询问某些问题时，会出现可以获取回答但使用update之后程序会崩溃，没有报错信息

### 7.18
- 修复了switch功能中不能删除子布局的内容物
- 添加了update按钮，用于更新右侧文本显示区域
- 将submit放入子线程中，并且将原本更新文本显示区域的功能独立出来，为了等待回答时左侧模型区域可以互动
- 增加了递归方法，用于删除子子部件以及其部件

### 7.14
- 修改了获取答案但无响应的等待时间，现在在这种情况的响应速度是原来的二倍


### 7.13
- 修复由于网络传输问题出现的乱码导致程序崩溃的问题
- 修复由于传输格式导致的程序崩溃问题
- 添加异常处理用于重新连接到模型并获取答案
- BUG：当提交问题时，模型对话服务器正在启动，会导致模型服务器无法启动，并且导致程序崩溃
- BUGFIX: 对服务器启动时添加了休眠以避免因提交问题时间导致的无法启动以及程序崩溃，但为了避免意外情况，请在提交问题前确保模型对话服务器已经启动


### 7.12
- 修改添加右侧布局的方式
- 对右侧布局添加了显示切换方法，可以切换模型展示或者模型问答界面
- 添加了模型问答功能，问答之前需要先在server端启动api.py
- 添加了提交问题按钮，点击后可以提交问题并且从模型问答系统中获取答案
- 修改了右侧按钮的布局格式
- 触屏上使用投屏，输入方式应该为电脑启动的软键盘，暂时不清楚如何在触屏上使用触屏中自带的输入方式
- 尝试将程序在远程运行，由于性能原因，程序中模型过于卡顿，使用将程序放在本地电脑上，将模型在远程运行，使用socket链接通信的方式解决

### 6.28
- 添加了Move按钮，使在触屏下可以移动模型
- 添加了select按钮，对选择模型进行了条件限制，之后按下select按钮后可以选择模型。这个按钮可以避免旋转模型时误触导致切换模型
- 修改reset按钮功能，现在可以重置模型的位置（将模型放置到渲染窗口的正中间，但是不能重置旋转导致的变化）可以更好的适配触屏设备
- TODO：需要尝试将该程序导入到远程服务器上，看看是否可以正常运行
- TODO：尝试调整布局，使得按钮更加美观，对于select来说，希望可以更改为一种勾选的形式，而不是现在的按钮形式

### 6.27
- 优化了查找pdf文件的方法，现在能匹配更多零件的pdf文件
- 添加RS进入到显示界面，连接到原有功能上
- 添加了显示所选模型父级模型的按钮，点击后隐藏非所选模型父级模型
- 主窗口重置方法添加了对应的功能，现在科技将隐藏的模型复原
- 更改了模型颜色（需要进一步讨论）
- 将RS的BOM表信息添加到现有的json文件中并且删除了重复的对象（完全一致的对象会被删除，仅有部分信息相同的对象会被保留）

### 6.26
- 新加入RS，但遇到内存问题

### 截至 6.25
- 把原先一整个.py文件分成三个： `my_interactor.py`, `main_window.py`, `app.py`
- 把两个主要的类里面的所有方法给`抽象`出来
- 针对每一块代码都添加了指数
- 实现了`show pdf`这个按钮和功能

### 6.21
- 增加了点击后显示对应图纸文件的功能（如在BOM表中有对应文件名）
- 添加了显示该图纸文件的按钮，使用PDFelement打开
- 对代码做了可执行文件的适配，如需要运行代码需要把适配改回去，不然无法找到对应的文件夹，可执行文件可以正常使用

### 6.20
- 将BOM表转成json后在界面里显示出来，根据选中的模型显示对应的信息
- 如BOM表中并未含有该模型的信息，则仅显示选中的模型文件名
- 删除了冗余代码
- TODO: 尝试将BOM表对应的图纸显示出来，初步想法为创建一个新的button，点击之后在新窗口中显示图纸（pdf）

### 6.19
- 解决了重复点击重复显示文件名的问题
- 修复了第二次点击时不需要显示的问题
- 修复了可以自由修改文本框的问题，现在文本框为只读状态
- TODO：删除冗余代码

### 6.15
- 在右侧空白区域添加点击事件后的零件名称(需要解决： 第二次点击时不需要显示)
  - 功能实现见 `代码讲解与备份.md`
- 删掉两行代码
```python                
  if '34654' in file_name:
    self.visibleActors.append(actor)
```







